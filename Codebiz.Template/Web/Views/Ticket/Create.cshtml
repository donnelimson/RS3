@{
    ViewBag.Title = "Ticket Form";
}

<div class="row" ng-app="MetronicApp"
     ng-controller="TicketAddOrUpdateController" file-upload="options">
    <div class="col-md-12">
        <!-- BEGIN PAGE BAR -->
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="@Url.Action("Index", "Ticket")">Tickets</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <span>Create</span>
                </li>
            </ul>
        </div>
        <!-- END PAGE BAR -->
        <!-- BEGIN PAGE TITLE-->
        <h1 class="page-title">
            <span>Ticket <small>Form</small></span>
        </h1>
        <!-- END PAGE TITLE-->
        <!-- END PAGE HEADER-->
        <div class="row">
            <div ng-form="f" class="col-md-12 loading-container" loading-container="isDataLoading">
                <!-- BEGIN PORTLET -->
                <div class="portlet light bordered" id="applicant-add">
                    <div class="portlet-body">

                        <fieldset>
                            <div class="portlet box blue-hoki">
                                <div class="portlet-title" style="padding-top:0px; padding-bottom:0px;">
                                    <div class="caption col-md-3">
                                        Ticket Information
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="row" style="margin-bottom:30px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.Title.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Title <span class="required">*</span></label>
                                                <div class="col-md-6">
                                                    <input type="text" name="Title" ng-model="m.Title" class="form-control" alphanumeric-dash-only ng-required="true" />
                                                    <span ng-show="f.Title.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Title is required!</small></span>
                                                </div>

                                            </div>
                                        </div>


                                    </div>
                                    <div class="row" style="margin-bottom:10px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.Description.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Description <span class="required">*</span></label>
                                                <div class="col-md-6">
                                                    <textarea name="Description" ng-model="m.Description" class="form-control" alphanumeric-dash-only ng-required="true" maxlength="500" rows="7"></textarea>
                                                    <span style="float:right;">{{m.Description.length == null ? 0 : m.Description.length}}/500</span>
                                                    <span ng-show="f.Description.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Description is required!</small></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.Priority.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Priority <span class="required" style="white-space:nowrap">*</span></label>
                                                <div class="col-md-2">
                                                    <select select2 name="Priority" id="Priority" class="form-control not-allow-numbers"
                                                            ng-model="m.Priority" ng-options="p.Description as (p.Description) for p in priorities" ng-required="true">
                                                        <option value="">---Please select---</option>
                                                    </select>
                                                    <span ng-show="f.Priority.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Priority is required!</small></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="portlet box blue-hoki">
                                <div class="portlet-title" style="padding-top:0px; padding-bottom:0px;">
                                    <div class="caption col-md-3">
                                        Client and Tech Information
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="row" style="margin-bottom:10px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.Client.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Client <span class="required">*</span></label>
                                                <div class="col-md-6">
                                                    <input type="text" name="Client" ng-model="m.Client" class="form-control" alphanumeric-dash-only ng-required="true" ng-disabled="!IsGuess" />
                                                    <span ng-show="f.Client.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Client is required!</small></span>
                                                </div>
                                                <div class="col-md-1">
                                                    <input type="checkbox" ng-model="IsGuess" ng-change="guessChange()" />Guess Client
                                                </div>

                                            </div>
                                        </div>


                                    </div>
                                    <div class="row" style="margin-bottom:10px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.ClientAddress.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Address <span class="required" ng-show="IsGuess">*</span></label>
                                                <div class="col-md-6">
                                                    <input type="text" name="ClientAddress" ng-model="m.ClientAddress" class="form-control" alphanumeric-dash-only ng-required="IsGuess" ng-disabled="!IsGuess" />
                                                    <span ng-show="f.Address.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Address is required!</small></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-bottom:10px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.Technician.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Assign to <span class="required">*</span></label>
                                                <div class="col-md-6">
                                                    <input type="text" name="Technician" ng-model="m.Technician" class="form-control" alphanumeric-dash-only ng-required="true" />
                                                    <span ng-show="f.Technician.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> Technician is required!</small></span>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-bottom:10px;">
                                        <div class="col-md-12">
                                            <div class="form-group" ng-class="f.TechnicianAddress.$error.required && formSubmitted ? 'has-error':''">
                                                <label class="control-label col-md-1">Adress</label>
                                                <div class="col-md-6">
                                                    <input type="text" name="TechnicianAddress" ng-model="m.TechnicianAddress" class="form-control" alphanumeric-dash-only disabled />
                                                    <span ng-show="f.TechnicianAddress.$error.required && formSubmitted"
                                                          class="text-danger field-validation-error"><small> address is required!</small></span>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @Html.Partial("_SupportingDocument")
                            <!-- END SUPPORTING DOCUMENTS -->
                            <!-- START SAVE AND CANCEL BUTTONS -->
                            <div class="row" style="margin-top:20px">
                                <div class="col-md-12">
                                    <div class="actions btn-set">
                                        <button class="btn btn-success" id="addbtn" style="width: 90px;" ng-click="save()">
                                            <span class="glyphicon glyphicon-ok"></span>&nbsp; {{isUpdate ? 'Update':'Create'}}
                                        </button>
                                        <button class="btn btn-default actionbtns" style="width: 90px;" ng-click="cancelAdd()">
                                            <span class="glyphicon glyphicon-warning-sign"></span>&nbsp; Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- END SAVE AND CANCEL BUTTONS -->

                        </fieldset>
                    </div>
                </div>
                <!-- END PORTLET -->
            </div>
        </div>
    </div>

</div>

@section PageStyles {
    <style>
        .applicant-add {
            font-family: Open Sans;
            font-size: 12px;
        }



        .overlay-wrapper {
            z-index: 100;
            position: absolute;
            top: 0;
            width: 200px;
            height: 100%;
            left: 120px;
            display: inline-block;
            margin: 7px 35px 0px -35px;
            font-size: medium;
        }

        .overlay-wrapper button {
            margin-right: 0;
            background: rgba(255,255,255,0.3);
        }

        .overlay-wrapper-sign {
            z-index: 100;
            position: absolute;
            top: 120px;
            width: 200px;
            height: 100%;
            left: 198px;
            display: inline-block;
            margin: 7px 35px 0px -35px;
            font-size: medium;
        }

        .overlay-wrapper-sign button {
            margin-right: 0;
            background: rgba(255,255,255,0.3);
        }

        .photo-crop-preview {
            height: 190px;
            width: 190px;
        }

        .signature-crop-preview {
            height: 100px;
            width: 267px;
        }

        .resizeThumb {
            width: 90px;
            height: 90px;
        }

        .image-has-error {
            border: 1px solid red;
        }

        .photo-container {
            width: 100%;
            height: 100%;
        }

        .img-fit {
            max-width: 95%;
            max-height: 95%;
        }

        .overlay-btn-container {
            float: right;
            position: absolute;
            top: 5px;
            right: 5px;
        }

        .pull-bottom {
            display: inline-block;
            vertical-align: bottom;
            float: none;
            margin-right: 3%;
        }

        .signature-div {
            width: 24%;
        }

        .jcrop-centered {
            display: inline-block;
            margin: auto;
        }

        .crop-image-wrapper {
            text-align: center;
        }

        .img-centered {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .whiteinput {
            background-color: white !important;
        }

        #PoleIdDiv [class^='select2'] {
            border-top-right-radius: 0 !important;
            border-bottom-right-radius: 0 !important;
        }

        video:hover {
            cursor: url('@Url.Content("~/assets/global/img/camera-cursor.png")'), auto;
        }
    </style>

    @Styles.Render("~/assets/global/plugins/fancybox/source/jquery.fancybox.css")
    @Styles.Render("~/assets/global/plugins/jquery-file-upload/blueimp-gallery/blueimp-gallery.min.css")
    @Styles.Render("~/css/datepicker")
    @Styles.Render("~/css/fileupload")
    @Styles.Render("~/assets/global/plugins/jcrop/css/jquery.Jcrop.min.css")
    @Styles.Render("~/assets/pages/css/image-crop.min.css")
    @Styles.Render("~/Content/ng-table.min.css")
    @Styles.Render("~/Content/jquery.mloading.css")
}

@section PageScripts {
    <script src="~/Scripts/App/Services/RS3/TicketService.js"></script>
    <script src="~/Scripts/App/Controllers/RS3/TicketController.js"></script>
    @Scripts.Render("~/bundles/fileupload")
    @Scripts.Render("~/assets/global/plugins/jcrop/js/jquery.Jcrop.min.js")
    @Scripts.Render("~/Content/jquery.mloading.js")
}

@section AngularJSPlugins {
    @Scripts.Render("~/Scripts/ng-table.js")
}

@section AngularJSPage {

}
